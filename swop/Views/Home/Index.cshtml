<head>
    @if ((bool)Session["Logged"])
    {
        <meta http-equiv="refresh" content="0; url = http://localhost:54598/HomePage/Index" />

    }

</head>

@model swop.Models.User
@{
    ViewBag.Title = "Home Page";
}
    <section class="section-1">
        <div class="row" , style="margin-left: 15px; margin-top: 20px;">
            <div class="col-md-4">
                <h2>Welcome to SWoP!</h2>
                <p>
                    <text>SWoP is the new way to experience couch surfing while saving up on expenses with your own place!</text>
                </p>
            </div>
            <div class="col-md-4">
                <h2>Our Vision</h2>
                <p>
                    <text>as college students looking for a getaway once in a while, we were always on the lookout for deals on couch surfing. while looking for a resident for our apartment to save up on trip expenses. we founded SWoP to combine these two efforts into one simple website!</text>
                </p>
            </div>
            <div class="col-md-4">
                <h2>Log-In</h2>
                @using (Html.BeginForm("Login", "Users"))
                {
                    <div class="form-group">
                        @Html.LabelFor(m => m.Email)

                        @Html.TextBoxFor(m => m.Email, new { @class = "form-control" })

                    </div>
                    <div class="form-group">
                        @Html.LabelFor(m => m.Password)

                        @Html.TextBoxFor(m => m.Password, new { @class = "form-control", @type = "password" })

                    </div>
                    <div class="form-group">
                        <div>
                            <input type="submit" class="btnGeneral btnGeneral:hover" style="margin-left: 5px" value="Login"/>
                            @Html.ActionLink("Sign-Up", "Create", "Users", null,  new { @class = "btnGeneral btnGeneral", @style = "margin-left: 30px" })
                        </div>
                    </div>
                }
            </div>
        </div>
        </section>
        <!--TODO: if already signed in automaticly move to the next page (can use the "isLoged" method)-->
        <!--<script>
        $(document).ready(() => {
            checkIsLogged();
           // $("#LogInBtn").click(() => LogIn());
            //$("#LogInBtn").onclick = LogIn();
            //$("#SignUpBtn").click(() => SignUp());
        });

        function LogIn() {
            //get user input
            var email = $("#UserNameInput").val();
            var pass = $("#PasswordInput").val();
            //use back end login method using ajax
            $.ajax({
                type: "GET",
                url: "/Users/Login",
                data: {
                    email: email,
                    password: pass
                },
                dataType: "json",
                success: function (data) {
                    if (!data) {
                        alert("problem with email or password");
                    }
                    checkIsLogged();
                },

                error: function (xhr, status, error) {
                    alert("problem with retreiving User Info");
                }
            });
        }

        function checkIsLogged() {
            $.ajax({
                type: "GET",
                url: "/Users/IsLogged",
                data: {},
                dataType: "json",
                success: function (data) {
                    $("#MoveToHome").trigger();
                    $(".LogIn").each((index, element) => {
                        element.style.display = "none";
                    });
                    return data;

                },
                error: function (xhr, status, error) {
                    alert("problem with retreiving User Info");
                }
            });
        }
    </script>-->
